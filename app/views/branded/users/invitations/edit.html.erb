<%#
Devise Invitation acceptance form arrived at after the user visits the site directly or
clicks the invitation link their email
%>
<%
  method = @shibbolized ? :post : :put
  url = @shibbolized ? user_shibboleth_omniauth_authorize_path : invitation_path(resource_name)
%>

<% content_for :authentication do %>

  <%= form_with model: resource, url: url, method: method, local: true do |form| %>
    <h2><%= _("Sign up") %></h2>

    <%= form.hidden_field :invitation_token %>

    <%= render partial: "users/registrations/form",
               locals: { form: form, shibbolized: @shibbolized } %>
  <% end %>
  <p>
    <%= sanitize(_("This will create a new account. If you already have an account, %{go_back_link} to try a different email address, or %{contact_us_link}.") % {
      go_back_link: link_to(_("go back"), root_path),
      contact_us_link: link_to(_("contact us"), contact_us_path)
    }) %>
  </p>

  <span class="form-group">
    <%= render partial: "users/shared/links", locals: { show_contact_us: false } %>
  </span>

<% end %>

<% content_for :home do %>
  <%= render partial: "layouts/home" %>
<% end %>