<%# locals: org %>

<div class="c-logo-org">
  <% if org&.logo&.present? %>
    <%= image_tag(logo_url_for_org(org), alt: org.name, class: "org-logo", title: org.name) %>
  <% else %>
    <p><%= org.name %></p>
  <% end %>
</div>

<% if org.links.any? && org.links['org'].present? %>
  <div class="c-links-org">
    <ul>
      <% org.links['org'].each do |link| %>
        <% next unless link['link'].present? %>

        <li>
          <%= link_to link['link'], :target=>'_blank', :class => 'has-new-window-popup-info' do %>
            <i class="fas fa-globe" aria-hidden="true">&nbsp;</i>
            <%= link['text'].blank? ? link['link'] : link['text'] %>
            <em class="sr-only"> (new window)</em>
            <span class="new-window-popup-info"><%= _('Opens in new window') %></span>
          <% end %>
        </li>
      <% end %>

      <% if org.contact_email.present? %>
        <%= mail_to org.contact_email do %>
          <i class="fas fa-envelope" aria-hidden="true">&nbsp;</i>
          <%= org.contact_name ? org.contact_name : org.contact_email %>
        <% end %>
      <% end %>
    </ul>
  </div>
<% end %>

<% if current_user.can_org_admin? %>
  <div id="js-admin" class="c-admin">
    <button id="js-admin__button" class="c-admin__button" aria-label="administrator menu">
      <%= _("Admin") %>
    </button>
    <ul id="js-admin__menu" class="c-admin__menu" hidden>
      <% if current_user.can_super_admin? %>
        <li><%= link_to(_('Api Clients'), super_admin_api_clients_path) %></li>
      <% end %>
      <% if current_user.can_modify_guidance? %>
        <li><%= link_to _('Guidance'), admin_index_guidance_path(current_user.org_id) %></li>
      <% end %>
      <% if current_user.can_super_admin? %>
        <li><%= link_to _('Notifications'), super_admin_notifications_path %></li>
      <% end %>
      <% if current_user.can_super_admin? %>
        <li><%= link_to _('Organisations'), super_admin_orgs_path %></li>
      <% elsif current_user.can_modify_org_details? %>
        <li><%= link_to _('Organisation details'), admin_edit_org_path(current_user.org_id) %></li>
      <% end %>
      <% if current_user.can_org_admin? %>
        <li><%= link_to _('Plans'), org_admin_plans_path %></li>
      <% end %>
      <% if current_user.can_modify_templates? %>
        <% template_path = current_user.can_super_admin? ? org_admin_templates_path : organisational_org_admin_templates_path %>
        <li><%= link_to _('Templates'), template_path %></li>
      <% end %>
      <% if current_user.can_super_admin? %>
        <li><%= link_to(_('Themes'), super_admin_themes_path) %></li>
      <% end %>
      <% if current_user.can_org_admin? %>
        <li><%= link_to(_('Usage'), usage_index_path) %></li>
      <% end %>
      <% if current_user.can_grant_permissions? %>
        <li><%= link_to _('Users'), admin_index_users_path, class: 'main_nav_last_li' %></li>
      <% end %>
    </ul>
  </div>
<% end %>